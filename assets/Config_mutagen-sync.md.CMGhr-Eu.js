import{_ as a,c as s,o as n,ai as i}from"./chunks/framework.V7jGl-OZ.js";const u=JSON.parse('{"title":"Mutagen Sync Setup for Alice AI + Obsidian","description":"","frontmatter":{},"headers":[],"relativePath":"Config/mutagen-sync.md","filePath":"Config/mutagen-sync.md"}'),t={name:"Config/mutagen-sync.md"};function o(l,e,c,r,d,p){return n(),s("div",null,e[0]||(e[0]=[i(`<h1 id="mutagen-sync-setup-for-alice-ai-obsidian" tabindex="-1">Mutagen Sync Setup for Alice AI + Obsidian <a class="header-anchor" href="#mutagen-sync-setup-for-alice-ai-obsidian" aria-label="Permalink to &quot;Mutagen Sync Setup for Alice AI + Obsidian&quot;">​</a></h1><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to &quot;Problem&quot;">​</a></h2><p>SSHFS is too slow for real-time Obsidian sync. Every file operation requires a network round-trip, causing massive delays when working with many small files.</p><h2 id="solution" tabindex="-1">Solution <a class="header-anchor" href="#solution" aria-label="Permalink to &quot;Solution&quot;">​</a></h2><p><strong>Mutagen</strong>: A bidirectional file sync tool that works over SSH. You edit local files at native speed; a background daemon handles synchronization.</p><hr><h2 id="setup-steps-completed" tabindex="-1">Setup Steps (Completed) <a class="header-anchor" href="#setup-steps-completed" aria-label="Permalink to &quot;Setup Steps (Completed)&quot;">​</a></h2><h3 id="_1-ssh-passwordless-authentication" tabindex="-1">1. SSH Passwordless Authentication <a class="header-anchor" href="#_1-ssh-passwordless-authentication" aria-label="Permalink to &quot;1. SSH Passwordless Authentication&quot;">​</a></h3><p><strong>Why:</strong> Mutagen must reconnect automatically without manual password entry.</p><p><strong>What we did:</strong></p><ul><li>Generated SSH key pair (already existed): <code>~/.ssh/id_rsa</code></li><li>Copied public key to VPS: <code>ssh-copy-id alice@138.68.111.47</code></li><li>Fixed permissions on VPS (SSH rejected keys due to world-writable home):</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>  chmod 755 /home/alice  chmod 700 /home/alice/.ssh  chmod 600 /home/alice/.ssh/authorized_keys</span></span></code></pre></div><ul><li>Verified: <code>ssh alice@138.68.111.47 &quot;echo Success&quot;</code> (no password prompt)</li></ul><h3 id="_2-mutagen-installation" tabindex="-1">2. Mutagen Installation <a class="header-anchor" href="#_2-mutagen-installation" aria-label="Permalink to &quot;2. Mutagen Installation&quot;">​</a></h3><p><strong>Local (macOS):</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>brew install mutagen-io/mutagen/mutagen</span></span></code></pre></div><p><strong>Remote:</strong> Agent auto-installs on first connection (no manual setup needed).</p><h3 id="_3-created-sync-session" tabindex="-1">3. Created Sync Session <a class="header-anchor" href="#_3-created-sync-session" aria-label="Permalink to &quot;3. Created Sync Session&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen sync create \\</span></span>
<span class="line"><span>    --name=alice-knowledge \\</span></span>
<span class="line"><span>    --sync-mode=two-way-safe \\</span></span>
<span class="line"><span>    ~/vps_knowledge \\</span></span>
<span class="line"><span>    alice@138.68.111.47:/home/alice/ai-runner/_work/alice-ai/alice-ai/knowledge</span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>--name</code>: Human-readable identifier</li><li><code>--sync-mode=two-way-safe</code>: Bidirectional sync with conflict detection (never overwrites without warning)</li><li>Local path: <code>~/vps_knowledge</code></li><li>Remote path: <code>/home/alice/ai-runner/_work/alice-ai/alice-ai/knowledge</code></li></ul><h3 id="_4-resolved-initial-conflict" tabindex="-1">4. Resolved Initial Conflict <a class="header-anchor" href="#_4-resolved-initial-conflict" aria-label="Permalink to &quot;4. Resolved Initial Conflict&quot;">​</a></h3><p><strong>Issue:</strong> <code>.obsidian/workspace.json</code> existed on both sides with different content.</p><p><strong>Resolution:</strong></p><ul><li>Deleted remote version: <code>ssh alice@138.68.111.47 &quot;rm /home/alice/ai-runner/_work/alice-ai/alice-ai/knowledge/.obsidian/workspace.json&quot;</code></li><li>Flushed local copy to remote: <code>mutagen sync flush alice-knowledge</code></li></ul><hr><h2 id="current-configuration" tabindex="-1">Current Configuration <a class="header-anchor" href="#current-configuration" aria-label="Permalink to &quot;Current Configuration&quot;">​</a></h2><h3 id="session-details" tabindex="-1">Session Details <a class="header-anchor" href="#session-details" aria-label="Permalink to &quot;Session Details&quot;">​</a></h3><ul><li><strong>Name:</strong> <code>alice-knowledge</code></li><li><strong>Mode:</strong> Two-way safe (conflict-preserving)</li><li><strong>Local:</strong> <code>~/vps_knowledge</code></li><li><strong>Remote:</strong> <code>alice@138.68.111.47:/home/alice/ai-runner/_work/alice-ai/alice-ai/knowledge</code></li><li><strong>Status:</strong> Active, watching for changes</li><li><strong>Sync Latency:</strong> 1-2 seconds</li></ul><h3 id="file-counts-as-of-setup" tabindex="-1">File Counts (as of setup) <a class="header-anchor" href="#file-counts-as-of-setup" aria-label="Permalink to &quot;File Counts (as of setup)&quot;">​</a></h3><ul><li>68 directories</li><li>204 files (~13 MB)</li><li>0 symbolic links</li></ul><hr><h2 id="daily-usage" tabindex="-1">Daily Usage <a class="header-anchor" href="#daily-usage" aria-label="Permalink to &quot;Daily Usage&quot;">​</a></h2><h3 id="obsidian" tabindex="-1">Obsidian <a class="header-anchor" href="#obsidian" aria-label="Permalink to &quot;Obsidian&quot;">​</a></h3><p>Point vault to <code>~/vps_knowledge</code>. Work normally. Changes sync automatically to VPS.</p><h3 id="ai-agent-access" tabindex="-1">AI Agent Access <a class="header-anchor" href="#ai-agent-access" aria-label="Permalink to &quot;AI Agent Access&quot;">​</a></h3><p>Agent reads/writes to <code>/home/alice/ai-runner/_work/alice-ai/alice-ai/knowledge</code> on VPS. Changes appear locally within seconds.</p><h3 id="monitoring" tabindex="-1">Monitoring <a class="header-anchor" href="#monitoring" aria-label="Permalink to &quot;Monitoring&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen sync list                    # Check statusmutagen sync monitor                 # Watch live changesmutagen sync flush alice-knowledge   # Force immediate sync</span></span></code></pre></div><h3 id="after-system-reboot" tabindex="-1">After System Reboot <a class="header-anchor" href="#after-system-reboot" aria-label="Permalink to &quot;After System Reboot&quot;">​</a></h3><p>If Mutagen daemon stops:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen daemon start</span></span></code></pre></div><p>Session resumes automatically.</p><hr><h2 id="optional-ignore-obsidian-ui-state" tabindex="-1">Optional: Ignore Obsidian UI State <a class="header-anchor" href="#optional-ignore-obsidian-ui-state" aria-label="Permalink to &quot;Optional: Ignore Obsidian UI State&quot;">​</a></h2><p>To prevent <code>.obsidian/workspace.json</code> conflicts (recommended):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen sync terminate alice-knowledgemutagen sync create \\</span></span>
<span class="line"><span>    --name=alice-knowledge \\</span></span>
<span class="line"><span>    --sync-mode=two-way-safe \\</span></span>
<span class="line"><span>    --ignore=&quot;.obsidian/workspace.json&quot; \\</span></span>
<span class="line"><span>    ~/vps_knowledge \\</span></span>
<span class="line"><span>    alice@138.68.111.47:/home/alice/ai-runner/_work/alice-ai/alice-ai/knowledge</span></span></code></pre></div><hr><h2 id="key-constraints-risks" tabindex="-1">Key Constraints &amp; Risks <a class="header-anchor" href="#key-constraints-risks" aria-label="Permalink to &quot;Key Constraints &amp; Risks&quot;">​</a></h2><ol><li><strong>Conflict Handling:</strong> If both you and the AI modify the same file simultaneously, Mutagen creates conflict copies (filename with hash suffix). Resolve manually.</li><li><strong>Atomic Writes:</strong> Ensure AI agent writes atomically (write to temp file → rename) to avoid partial-file syncs.</li><li><strong>Network Dependency:</strong> If SSH connection drops, sync pauses until reconnected (auto-reconnects via passwordless auth).</li><li><strong>No Version Control:</strong> Mutagen is not Git. Consider using Obsidian Git plugin as backup for critical notes.</li></ol><hr><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><p><strong>Sync stuck:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen sync reset alice-knowledge</span></span></code></pre></div><p><strong>Connection issues:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen daemon stopmutagen daemon start</span></span></code></pre></div><p><strong>Check logs:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mutagen daemon logs</span></span></code></pre></div>`,58)]))}const g=a(t,[["render",o]]);export{u as __pageData,g as default};
